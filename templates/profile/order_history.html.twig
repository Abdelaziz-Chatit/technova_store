{% extends 'base.html.twig' %}

{% block title %}Order History - {{ parent() }}{% endblock %}

{% block body %}
<div style="max-width: 1000px; margin: 2rem auto;">
    <h1 style="margin-bottom: 2rem; color: #2c3e50;">Order History</h1>

    {% if orders|length == 0 %}
        <div style="background: white; padding: 3rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); text-align: center;">
            <p style="font-size: 1.2rem; color: #666; margin-bottom: 1rem;">You haven't placed any orders yet.</p>
            <a href="{{ path('app_product_catalog') }}" class="btn">Browse Products</a>
        </div>
    {% else %}
        <div style="background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="border-bottom: 2px solid #ddd;">
                        <th style="padding: 1rem; text-align: left;">Order #</th>
                        <th style="padding: 1rem; text-align: left;">Date</th>
                        <th style="padding: 1rem; text-align: left;">Total</th>
                        <th style="padding: 1rem; text-align: left;">Status</th>
                        <th style="padding: 1rem; text-align: left;">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for order in orders %}
                        <tr style="border-bottom: 1px solid #eee;">
                            <td style="padding: 1rem;">#{{ order.id }}</td>
                            <td style="padding: 1rem;">{{ order.createdAt|date('Y-m-d H:i') }}</td>
                            <td style="padding: 1rem; font-weight: bold; color: #27ae60;">${{ order.totalAmount|number_format(2) }}</td>
                            <td style="padding: 1rem;">
                                <span style="padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.9rem; 
                                    {% if order.status == 'paid' %}background: #d4edda; color: #155724;
                                    {% elseif order.status == 'pending' %}background: #fff3cd; color: #856404;
                                    {% elseif order.status == 'cancelled' %}background: #f8d7da; color: #721c24;
                                    {% else %}background: #e2e3e5; color: #383d41;{% endif %}">
                                    {{ order.status|upper }}
                                </span>
                            </td>
                            <td style="padding: 1rem;">
                                <a href="{{ path('app_order_detail', {id: order.id}) }}" class="btn" style="padding: 0.5rem 1rem; font-size: 0.9rem;">View Details</a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% endif %}

    <div style="margin-top: 2rem;">
        <a href="{{ path('app_profile') }}" class="btn" style="background: #95a5a6;">Back to Profile</a>
    </div>
</div>
{% endblock %}

