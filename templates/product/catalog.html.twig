{% extends 'base.html.twig' %}

{% block title %}Products{% endblock %}

{% block body %}
    <h1>Our Products</h1>

    {% if categories is not empty %}
        <div class="category-filter">
            <strong>Filter by category:</strong>
            <a href="{{ path('app_product_catalog') }}" class="{{ selectedCategory is null ? 'active' : '' }}">
                All
            </a>
            {% for category in categories %}
                <a href="{{ path('app_product_by_category', {slug: category.slug}) }}" 
                   class="{{ selectedCategory and selectedCategory.id == category.id ? 'active' : '' }}">
                    {{ category.name }}
                </a>
            {% endfor %}
        </div>
    {% endif %}

    {% if selectedCategory %}
        <p style="color: #7f8c8d;">Showing products in: <strong>{{ selectedCategory.name }}</strong></p>
    {% endif %}

    <div class="product-grid">
        {% for product in products %}
            {% include 'partials/_product_card.html.twig' with {'product': product} %}
        {% else %}
            <p>No products found.</p>
        {% endfor %}
    </div>
{% endblock %}